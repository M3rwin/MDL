{% extends 'base.html.twig' %}

{% block title %}Inscription au congrès{% endblock %}

{% block navbar %}
            <nav class="navbar navbar-expand-lg navbar-light" style="background-color: lightblue;">
                <div class="container-fluid">
                    <a class="navbar-brand" href="/accueil ">MDL</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNavDropdown">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" href="/accueil">Home</a>
                            </li>
                            {%  if app.user  %} 
                                {%  if is_granted('ROLE_ADMIN')%}
                                    <li class="nav-item">
                                        <a class="nav-link" href="/ajout">Ajout</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/modifier">Modifier</a>
                                    </li>
                                {% endif %}
                                {%  if is_granted('ROLE_INSCRIT')%}
                                    <li class="nav-item">
                                        <a class="nav-link active" href="/inscriptioncongres">Inscription</a>
                                    </li>
                                {% endif %}
                            </ul>

                            <ul class="navbar-log">
                                <li class="log-item">
                                    <a href="/logout" class="nav-link">Se deconnecter</a>
                                </li>
                            {% else %}
                                <ul class="navbar-log">
                                    <li class="log-item">
                                        <a href="/logout" class="nav-link">Se connecter</a>
                                    </li>
                                    <li class="log-item">
                                        <a href="/register" class="nav-link">S'inscrire</a>
                                    </li>
                                {% endif %}
                            </ul>
                    </div>
                </div>
            </nav>
        {% endblock %}

{% block body %}

    <body>
        
        <div class="card-container" >
            <div class="card-header">
                <strong>{{ licencie.nom }} {{ licencie.prenom }}</strong>
            </div>
            <ul class="card-content">
                <li>{{ licencie.idClub.nom }}</li>
                <li>{{ licencie.adresse1 }}</li>
                    {% if licencie.adresse2 is not null %}
                    <li>{{ licencie.adresse2 }}</li>
                    {% endif %}
                <li>{{ licencie.cp }} {{ licencie.ville }}</li>
                <li>{{ licencie.tel }}</li>
                <li>{{ licencie.mail }}
                    {% if licencie.mail != username %}
                        <form id="formemail"><input value="{{ licencie.mail }}" name="mail"  style="display: none"> <input type="submit" value="Definir comme mail du compte" id="mailconfirm"></form>
                        {% endif %}
                </li>
            </ul>
        </div>

        <div class="inscription" >
            <form action="/commitinscription" id="FormInscription" method="post">
                <div id="FormDiv">
                    <div id="FormAteliers">
                        <h3>Ateliers</h3>
                        {% for atelier in ateliers %}
                            <input type="checkbox" class="radioAtelier" name="ateliers[]" id="{{ atelier.libelle }}" value="{{ atelier.id }}" />
                            <label for="{{ atelier.libelle }}">
                                <div class="card-container card-atelier"><div class="card-header">
                                        <strong>{{ atelier.libelle }}</strong>
                                    </div>
                                    <ul class="card-content"><li>{{ atelier.nbplacesmaxi - atelier.inscriptions|length }} places restante</li></ul>
                                </div>
                            </label>
                        {% endfor %}
                    </div>

                    <div id="FormHotels">
                        <h3>Nuités (Facultatif)</h3>
                        {% for nuite in hotels %}


                            <div class="card-nuite"><div class="card-header">
                                    <strong>{{ nuite.hotel.nom }}</strong>
                                </div>
                                <ul class="card-content">
                                    <li>{{ nuite.categoriechambre.libellecategorie }}</li>
                                    <li>{{ nuite.tarifnuite }} €</li>
                                    <input type="checkbox" class="radioNuite" name="Nuites[]" id="{{ nuite.id }}" value="{{ nuite.id }}_{{ nuite.hotel.nom }}_{{ nuite.categoriechambre.libellecategorie }}_{{ nuite.tarifnuite }}_2024-06-09_{{ nuite.categoriechambre.id }}_{{ nuite.hotel.id }}" />
                                    <label>
                                        06/09/2024
                                    </label>
                                    <input type="checkbox" class="radioNuite" name="Nuites[]" id="{{ nuite.id }}" value="{{ nuite.id }}_{{ nuite.hotel.nom }}_{{ nuite.categoriechambre.libellecategorie }}_{{ nuite.tarifnuite }}_2024-07-09_{{ nuite.categoriechambre.id }}_{{ nuite.hotel.id }}" />
                                    <label>
                                        07/09/2024
                                    </label>
                                    <input type="checkbox" class="radioNuite" name="Nuites[]" id="{{ nuite.id }}" value="{{ nuite.id }}_{{ nuite.hotel.nom }}_{{ nuite.categoriechambre.libellecategorie }}_{{ nuite.tarifnuite }}_2024-08-09_{{ nuite.categoriechambre.id }}_{{ nuite.hotel.id }}" />
                                    <label>
                                        08/09/2024
                                    </label>
                                </ul>
                            </div>

                        {% endfor %}
                    </div>
                    <div id="FormRestauration">
                        <h3>Restauration (Facultatif)</h3>

                        <div class="card-nuite"><div class="card-header">
                                <strong>38€ par repas</strong>
                            </div>
                            <ul class="card-content">
                                {% for repas in restauration %}
                                    <li><input type="checkbox" class="radioNuite" name="Restauration[]" id="{{ repas.id }}" value="{{ repas.id }}_{{ repas.dateRestauration|date('d/m/Y') }}_{{ repas.typeRepas }}" />
                                        <label>
                                            {{ repas.dateRestauration|date('d/m/Y') }} {{ repas.typeRepas }}
                                        </label>
                                    </li>
                                {% endfor %}
                            </ul>

                        </div>
                    </div>
                    <div id="SubmitSection">
                        <button type="button" id="recap">Voir mon inscription</button>


                    </div>
                            




                </div>
                <input type="submit" id="commit" style="display: none" value="Valider">
            </form>
                            <div id="RecapDiv"></div>
            <script src="{{ asset('js/inscriptioncongres.js') }}"></script>
    </body>
{% endblock %}
